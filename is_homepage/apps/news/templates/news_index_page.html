{% extends "theme/base.html" %}
{% load static wagtailcore_tags wagtailimages_tags %}

{% block extra_css %}
  <style>
    li.navigation-list {
        display: inline-block;
    }

    @media (min-width: 48.0625em) {
        li.navigation-list {
            display: block;
        }
    }
  </style>
{% endblock extra_css %}

{% block content %}

  <div class="nhsuk-width-container app-width-container nhsuk-main-wrapper">

    <div class="nhsuk-grid-row">
      <div class="nhsuk-grid-column-three-quarters app-component-reading-width">
        <h1>{{ self.title }}</h1>
        {% if self.content %}<div class="nhsuk-u-padding-bottom-5">{{ self.content|richtext }}</div>{% endif %}
      </div>
    </div>

    <div class="nhsuk-grid-row nhsuk-u-padding-bottom-5">

      <div class="nhsuk-grid-column-one-quarter">
        <nav aria-labelledby="page-filter-heading">
          <h2 id="page-filter-heading"
              class="nhsuk-heading-m nhsuk-u-padding-bottom-2 nhsuk-u-margin-bottom-3 border-bottom-separator-dark">
            Filter by type
          </h2>
          <ul class="nhsuk-u-padding-0">
            {% for item in news_types_list %}
              <li class="navigation-list">
                <a href="?{{ item.qp }}"
                   class="tag-link nhsuk-u-font-size-14{% if item.is_active %} selected{% endif %}">{{ item.title }}</a>
              </li>
            {% endfor %}
          </ul>
        </nav>
      </div>

      <div class="nhsuk-grid-column-three-quarters">

        <ul class="nhsuk-grid-row nhsuk-card-group">

          {% for item in news_list %}

            <li class="nhsuk-grid-column-full nhsuk-card-group__item">
              <div class="nhsuk-card d-flex align-items-center nhsuk-u-padding-5">
                <div>
                  <h2 class="nhsuk-card__heading nhsuk-heading-m">
                    <a href="{{ item.url }}" class="nhsuk-card__link">{{ item.title }}</a>
                  </h2>
                  <p class="nhsuk-card__description">{{ item.search_description }}</p>
                  <p class="nhsuk-body-s font-color-secondary">{{ item.first_published_at|date:'F j, Y' }}</p>
                  <ul class="nhsuk-u-margin-0 nhsuk-u-padding-0">
                    {% for news_type_item in item.news_type.all %}
                      <li class="tag-text tag-text__primary nhsuk-u-font-size-14">{{ news_type_item.title }}</li>
                    {% endfor %}
                  </ul>
                </div>

                {% if item.search_image %}
                  {% comment %} <div class="ml-auto nhsuk-u-padding-5"> {% endcomment %}
                  {% image item.search_image width-250 as news_image %}
                  <img src="{{ news_image.url }}" alt="{{ news_image.alt }}" class="ml-auto" />
                  {% comment %} </div> {% endcomment %}
                {% endif %}
 
              </div>
            </li>

          {% endfor %}

        </ul>

        {% include "partials/pagination.html" with pages=news_list range=pagination_range query_params=current_url_query_params %}

      </div>

    </div>

  </div>

{% endblock content %}
